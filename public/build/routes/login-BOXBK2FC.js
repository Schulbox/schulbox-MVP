import{c as k}from"/build/_shared/chunk-BZPDBGCT.js";import{a as w}from"/build/_shared/chunk-EFP3IDIJ.js";import"/build/_shared/chunk-5EDNXG7T.js";import{a as h}from"/build/_shared/chunk-VZQVWFLO.js";import{b as l,e as c,g as d,h as m,m as g}from"/build/_shared/chunk-YBGD6IQF.js";import{a as b,b as u}from"/build/_shared/chunk-TANAHWHW.js";import{e as o}from"/build/_shared/chunk-ADMCF34Z.js";var r=o(b(),1);var x=o(h(),1),v=o(k(),1),y=o(w(),1),e=o(u(),1);function p(){let s=g(),n=l(),a=c(),[t,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(s?.success&&s?.tokens){i(!0);try{localStorage.setItem("sb-refresh-token",s.tokens.refresh_token),localStorage.setItem("sb-access-token",s.tokens.access_token),localStorage.setItem("sb-auth-timestamp",Date.now().toString()),localStorage.setItem("sb-is-logged-in","true"),console.log("[Login] Tokens erfolgreich im localStorage gespeichert"),a.revalidate(),n("/",{replace:!0})}catch(f){console.error("[Login] Fehler beim Speichern der Tokens:",f),alert("Fehler beim Speichern der Anmeldedaten. Bitte stellen Sie sicher, dass Cookies und localStorage aktiviert sind."),i(!1)}}},[s,n,a]),(0,e.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-white p-4",children:(0,e.jsxs)("div",{className:"w-full max-w-md bg-white p-8 rounded-2xl shadow-lg",children:[(0,e.jsx)("h1",{className:"text-2xl font-semibold text-center text-gray-700 mb-6",children:"Login"}),(0,e.jsxs)(m,{method:"post",className:"space-y-5",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{htmlFor:"email",className:"block text-sm text-gray-600 mb-1",children:"E-Mail Adresse"}),(0,e.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,placeholder:"E-Mail",className:"w-full rounded-full border border-gray-300 px-4 py-2 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:outline-none shadow-sm",disabled:t})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{htmlFor:"password",className:"block text-sm text-gray-600 mb-1",children:"Passwort"}),(0,e.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,placeholder:"Passwort",className:"w-full rounded-full border border-gray-300 px-4 py-2 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:outline-none shadow-sm",disabled:t})]}),(0,e.jsx)("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 rounded-full transition transform hover:scale-105 disabled:opacity-50",disabled:t,children:t?(0,e.jsxs)("div",{className:"flex items-center justify-center",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),"Anmeldung l\xE4uft..."]}):"Einloggen"}),s?.error&&(0,e.jsx)("p",{className:"text-red-500 text-center text-sm mt-2",children:s.error})]}),(0,e.jsxs)("p",{className:"mt-8 text-center text-sm text-gray-500",children:["Noch kein Konto?"," ",(0,e.jsx)(d,{to:"/register",className:"text-blue-600 hover:underline",children:"Jetzt registrieren"})]})]})})}export{p as default};
